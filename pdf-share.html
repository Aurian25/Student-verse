<script>
const WORKER_URL = "https://pdf-proxy.suryasinghsn44.workers.dev/"; // your Worker

document.getElementById("uploadBtn").addEventListener("click", async () => {
  const f = document.getElementById("fileInput").files[0];
  if (!f) { alert("Select a PDF"); return; }

  const status = document.getElementById("status");
  const result = document.getElementById("result");
  status.textContent = "Uploading...";
  result.textContent = "";

  try {
    const res = await fetch(WORKER_URL, {
      method: "POST",
      headers: { "x-filename": f.name },
      body: f
    });

    const text = await res.text();   // üëà don‚Äôt parse JSON
    console.log("Raw response:", text);

    // If the response looks like a link, show it directly
    if (text.includes("http")) {
      status.textContent = "Uploaded!";
      result.innerHTML = `
        <div>Share link (expires automatically):</div>
        <a href="${text.trim()}" target="_blank">${text.trim()}</a>
      `;
    } else {
      status.textContent = "‚ö†Ô∏è Got unexpected response";
      result.innerHTML = `<pre>${text}</pre>`;
    }

  } catch (err) {
    status.textContent = "‚ùå Error: " + err.message;
  }
});
</script>
